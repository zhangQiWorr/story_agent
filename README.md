# 儿童故事生成器

这是一个基于人工智能的儿童故事生成器，可以从PDF文件中提取图片，分析图片内容，并生成一个连贯的儿童故事。

## 功能特点

- 从PDF文件中自动提取图片
- 使用先进的AI视觉语言模型分析图片内容
- 保持上下文连贯性，生成完整的故事情节
- 生成适合2-8岁儿童阅读的故事
- 支持自定义系统提示，调整故事风格
- 自动保存生成的故事，并提供下载功能
- 友好的Web界面，易于使用

## 安装

1. 克隆仓库：

```bash
git clone https://github.com/yourusername/storage_agent.git
cd storage_agent
```

2. 安装依赖：

```bash
pip install -r requirements.txt
```

## 使用方法

1. 运行应用：

```bash
python app.py
```

2. 在浏览器中打开显示的URL（通常是 http://127.0.0.1:7860）

3. 上传一个包含儿童故事图片的PDF文件

4. 点击"生成故事"按钮

5. 等待处理完成，查看生成的故事

6. 可以点击"下载故事"按钮下载生成的故事文件

## 高级设置

在"高级设置"标签页中，您可以自定义系统提示，以获得不同风格或内容的故事。默认提示专为儿童故事设计，但您可以根据需要进行调整。

## 技术架构

- 前端：Gradio
- 后端：Python
- AI模型：
  - 图片分析：Qwen VL（通义千问视觉语言模型）
  - 故事生成：Qwen（通义千问大语言模型）
- PDF处理：使用自定义工具提取图片

## 环境要求

- Python 3.8+
- 需要设置DASHSCOPE_API_KEY环境变量（阿里云灵积平台API密钥）

## 文件结构

- `app.py`: Gradio Web界面
- `main.py`: 命令行版本的主程序
- `llm/`: AI模型相关代码
  - `qwen_vl.py`: 视觉语言模型接口
  - `qwen2.py`: 大语言模型接口
- `util/`: 工具函数
  - `pdf_convert_image.py`: PDF转图片工具

## 注意事项

- 处理时间取决于PDF的大小和图片数量
- 请确保PDF文件包含清晰的图片
- 生成的故事会根据图片内容自动创建，适合2-8岁儿童阅读
- 自定义系统提示可以改变故事的风格和内容

## 许可证

MIT

## 联系方式

如有问题或建议，请联系：your.email@example.com 